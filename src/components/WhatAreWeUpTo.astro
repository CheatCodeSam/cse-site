---
import Feed from "./rss/Feed.astro";
import { XMLParser } from "fast-xml-parser";
import blurb from "../content/index/blurb.json";
import H1Text from "./H1Text.astro";

const response = await fetch(
  "https://plankton-app-nanep.ondigitalocean.app/feed/"
);
const data = await response.text();
const jObj = new XMLParser().parse(data);
---

<div class="bg-cse-navy text-stone-50">
  <div class="flex py-20 md:flex-row flex-col">
    <div class="flex flex-col pr-9 xl:pr-16 basis-5/12 mb-12">
      <H1Text light>What are we up to this time?</H1Text>
      <div
        class="text-base xl:text-xl pb-8 text-slate-300 font-montserrat font-light"
      >
        {blurb.whatAreWeUpToThisTime}
      </div>
      <div class="">
        <a href="/calendar"
          ><button class="btn btn-primary mb-6 block"
            >See upcoming events</button
          >
        </a>
        <a href="/announcements"
          ><button class="btn btn-primary block">Read announcements</button>
        </a>
      </div>
    </div>
    <Feed items={jObj.rss.channel.item} />
  </div>
</div>
